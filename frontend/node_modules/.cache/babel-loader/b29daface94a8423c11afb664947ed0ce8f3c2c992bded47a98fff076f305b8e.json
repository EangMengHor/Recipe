{"ast":null,"code":"var _jsxFileName = \"/Users/MengHor/Documents/Recipe/frontend/my-app/src/components/App.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState, useCallback } from 'react';\nimport axios from 'axios';\nimport Title from './Title';\nimport Card from './Card';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst App = () => {\n  _s();\n  const [recipes, setRecipes] = useState([]);\n  const [loading, setLoading] = useState(false);\n  const [nextLink, setNextLink] = useState(''); // Start with empty string\n  const [hasMore, setHasMore] = useState(true);\n  const [page, setPage] = useState(0); // Add page tracking\n\n  const fetchRecipes = useCallback(async () => {\n    if (loading) return;\n    setLoading(true);\n    try {\n      // Include page number in the request\n      const response = await axios.get('http://localhost:3001/api/data', {\n        params: {\n          nextLink: nextLink,\n          page: page\n        }\n      });\n      console.log('response');\n      console.log(response);\n      const newRecipes = response.data.recipes;\n      const newNextLink = response.data.nextLink;\n\n      // Only add recipes if they're not duplicates\n      setRecipes(prev => {\n        const existingIds = new Set(prev.map(r => r.id));\n        const uniqueNewRecipes = newRecipes.filter(recipe => !existingIds.has(recipe.id));\n        return [...prev, ...uniqueNewRecipes];\n      });\n      setNextLink(newNextLink);\n      setHasMore(!!newNextLink);\n      setPage(prev => prev + 1); // Increment page\n\n      console.log('Fetched new recipes:', newRecipes.length);\n      console.log('Total recipes:', recipes.length + newRecipes.length);\n    } catch (error) {\n      console.error(\"Error fetching data:\", error);\n    } finally {\n      setLoading(false);\n    }\n  }, [loading, nextLink, page]);\n\n  // Initial load\n  useEffect(() => {\n    fetchRecipes();\n  }, []);\n\n  // Infinite scroll handler\n  useEffect(() => {\n    const handleScroll = () => {\n      if (loading || !hasMore) return;\n      const scrollPosition = window.innerHeight + document.documentElement.scrollTop;\n      const pageHeight = document.documentElement.scrollHeight;\n      const threshold = 200;\n      if (pageHeight - scrollPosition < threshold) {\n        console.log('Triggering fetch near bottom');\n        fetchRecipes();\n      }\n    };\n    window.addEventListener('scroll', handleScroll);\n    return () => window.removeEventListener('scroll', handleScroll);\n  }, [loading, hasMore, fetchRecipes]);\n  console.log(recipes[0].r);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(Title, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"container\",\n      children: recipes.map((recipe, index) => /*#__PURE__*/_jsxDEV(Card, {\n        // Use just the recipe.id as key\n        id: recipe.id,\n        image: recipe.image,\n        title: recipe.title,\n        calories: recipe.calories,\n        protein: recipe.protein\n      }, `${recipe.id}`, false, {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 11\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 7\n    }, this), loading && /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        textAlign: 'center',\n        padding: '20px',\n        fontSize: '18px',\n        color: '#666'\n      },\n      children: \"Loading more recipes...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 9\n    }, this), !hasMore && recipes.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        textAlign: 'center',\n        padding: '20px',\n        fontSize: '18px',\n        color: '#666'\n      },\n      children: \"No more recipes to load\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 79,\n    columnNumber: 5\n  }, this);\n};\n_s(App, \"5Z8uSro06CCT2Pap+9/nHwX0aRM=\");\n_c = App;\nexport default App;\nvar _c;\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["React","useEffect","useState","useCallback","axios","Title","Card","jsxDEV","_jsxDEV","App","_s","recipes","setRecipes","loading","setLoading","nextLink","setNextLink","hasMore","setHasMore","page","setPage","fetchRecipes","response","get","params","console","log","newRecipes","data","newNextLink","prev","existingIds","Set","map","r","id","uniqueNewRecipes","filter","recipe","has","length","error","handleScroll","scrollPosition","window","innerHeight","document","documentElement","scrollTop","pageHeight","scrollHeight","threshold","addEventListener","removeEventListener","children","fileName","_jsxFileName","lineNumber","columnNumber","className","index","image","title","calories","protein","style","textAlign","padding","fontSize","color","_c","$RefreshReg$"],"sources":["/Users/MengHor/Documents/Recipe/frontend/my-app/src/components/App.js"],"sourcesContent":["import React, { useEffect, useState, useCallback } from 'react';\nimport axios from 'axios';\nimport Title from './Title';\nimport Card from './Card';\n\nconst App = () => {\n  const [recipes, setRecipes] = useState([]);\n  const [loading, setLoading] = useState(false);\n  const [nextLink, setNextLink] = useState('');  // Start with empty string\n  const [hasMore, setHasMore] = useState(true);\n  const [page, setPage] = useState(0);  // Add page tracking\n\n  const fetchRecipes = useCallback(async () => {\n    if (loading) return;\n    setLoading(true);\n\n    try {\n      // Include page number in the request\n      const response = await axios.get('http://localhost:3001/api/data', {\n        params: {\n          nextLink: nextLink,\n          page: page\n        }\n      });\n      console.log('response');\n      \n      console.log(response);\n      \n      const newRecipes = response.data.recipes;\n      const newNextLink = response.data.nextLink;\n\n      // Only add recipes if they're not duplicates\n      setRecipes(prev => {\n        const existingIds = new Set(prev.map(r => r.id));\n        const uniqueNewRecipes = newRecipes.filter(recipe => !existingIds.has(recipe.id));\n        return [...prev, ...uniqueNewRecipes];\n      });\n\n      setNextLink(newNextLink);\n      setHasMore(!!newNextLink);\n      setPage(prev => prev + 1);  // Increment page\n      \n      console.log('Fetched new recipes:', newRecipes.length);\n      console.log('Total recipes:', recipes.length + newRecipes.length);\n    } catch (error) {\n      console.error(\"Error fetching data:\", error);\n    } finally {\n      setLoading(false);\n    }\n  }, [loading, nextLink, page]);\n\n  // Initial load\n  useEffect(() => {\n    fetchRecipes();\n  }, []);\n\n  // Infinite scroll handler\n  useEffect(() => {\n    const handleScroll = () => {\n      if (loading || !hasMore) return;\n\n      const scrollPosition = window.innerHeight + document.documentElement.scrollTop;\n      const pageHeight = document.documentElement.scrollHeight;\n      const threshold = 200;\n\n      if (pageHeight - scrollPosition < threshold) {\n        console.log('Triggering fetch near bottom');\n        fetchRecipes();\n      }\n    };\n\n    window.addEventListener('scroll', handleScroll);\n    return () => window.removeEventListener('scroll', handleScroll);\n  }, [loading, hasMore, fetchRecipes]);\n\n  console.log(recipes[0].r);\n  \n  return (\n    <div>\n      <Title />\n      <div className=\"container\">\n        {recipes.map((recipe, index) => (\n          \n          <Card \n            key={`${recipe.id}`}  // Use just the recipe.id as key\n            id={recipe.id}\n            image={recipe.image}\n            title={recipe.title}\n            calories={recipe.calories}\n            protein = {recipe.protein}\n          />\n        ))}\n      </div>\n      {loading && (\n        <div style={{ \n          textAlign: 'center', \n          padding: '20px',\n          fontSize: '18px',\n          color: '#666'\n        }}>\n          Loading more recipes...\n        </div>\n      )}\n      {!hasMore && recipes.length > 0 && (\n        <div style={{ \n          textAlign: 'center', \n          padding: '20px',\n          fontSize: '18px',\n          color: '#666'\n        }}>\n          No more recipes to load\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default App;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}