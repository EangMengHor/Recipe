{"ast":null,"code":"var _jsxFileName = \"/Users/MengHor/Documents/Recipe/frontend/my-app/src/components/Card.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from 'react';\nimport Image from './Image';\nimport Name from './Name';\nimport Calorie from './Calorie';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction Card(props) {\n  _s();\n  const [isLiked, setIsLiked] = useState(false);\n  const [isLoading, setIsLoading] = useState(false);\n\n  // Check initial like status\n  useEffect(() => {\n    const checkLikeStatus = async () => {\n      if (!props.id) {\n        return; // Ensure we have an ID before checking the like status\n      }\n      try {\n        console.log(`Checking like status for recipe ID: ${props.id}`);\n        const response = await fetch(`http://localhost:3001/api/likes/check/${props.id}`, {\n          credentials: 'include',\n          headers: {\n            'Accept': 'application/json'\n          }\n        });\n        const data = await response.json();\n        console.log('Initial like status:', data.isLiked); // Debug log\n        setIsLiked(data.isLiked); // Set the initial like status\n      } catch (error) {\n        console.error('Error checking like status:', error);\n      }\n    };\n    checkLikeStatus(); // Check the like status on component mount\n  }, [props.id]); // Only run this effect when props.id changes\n\n  const handleLike = async e => {\n    e.preventDefault();\n    setIsLoading(true);\n    try {\n      const response = await fetch('http://localhost:3001/api/likes', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          'Accept': 'application/json'\n        },\n        body: JSON.stringify({\n          recipeId: props.id\n        }),\n        credentials: 'include'\n      });\n      if (response.ok) {\n        const data = await response.json();\n        setIsLiked(data.isLiked); // Update like status based on server response\n        console.log('Like status updated:', data.isLiked); // Debug log\n      } else {\n        console.error('Server returned error:', await response.text());\n      }\n    } catch (error) {\n      console.error('Error toggling like:', error);\n    } finally {\n      setIsLoading(false);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"card flex items-stretch\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"max-w-sm h-full bg border-gray-200 rounded-lg shadow dark:bg-gray-800 dark:border-gray-700\",\n        children: [/*#__PURE__*/_jsxDEV(\"img\", {\n          src: props.image,\n          alt: props.title\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 69,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"p-5\",\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            children: props.title\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 71,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: [props.calories, \" calories\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 72,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: handleLike,\n            disabled: isLoading,\n            className: `p-2 transition-colors duration-200 rounded-full ${isLoading ? 'cursor-wait opacity-50' : ''}`,\n            \"aria-label\": isLiked ? 'Unlike recipe' : 'Like recipe',\n            children: isLoading ? /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"animate-spin h-5 w-5\",\n              children: /*#__PURE__*/_jsxDEV(\"svg\", {\n                className: \"h-full w-full text-gray-400\",\n                viewBox: \"0 0 24 24\",\n                children: [/*#__PURE__*/_jsxDEV(\"circle\", {\n                  className: \"opacity-25\",\n                  cx: \"12\",\n                  cy: \"12\",\n                  r: \"10\",\n                  stroke: \"currentColor\",\n                  strokeWidth: \"4\",\n                  fill: \"none\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 82,\n                  columnNumber: 41\n                }, this), /*#__PURE__*/_jsxDEV(\"path\", {\n                  className: \"opacity-75\",\n                  fill: \"currentColor\",\n                  d: \"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 91,\n                  columnNumber: 41\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 81,\n                columnNumber: 37\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 80,\n              columnNumber: 33\n            }, this) : /*#__PURE__*/_jsxDEV(\"i\", {\n              className: `fa fa-heart text-xl ${isLiked ? 'text-red-500' : 'text-gray-600 dark:text-gray-400 hover:text-red-500'}`\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 99,\n              columnNumber: 33\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 73,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 70,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 66,\n    columnNumber: 9\n  }, this);\n}\n_s(Card, \"a4uHKw68ym16YaoNTI4bDuW3zwA=\");\n_c = Card;\nexport default Card;\nvar _c;\n$RefreshReg$(_c, \"Card\");","map":{"version":3,"names":["React","useEffect","useState","Image","Name","Calorie","jsxDEV","_jsxDEV","Card","props","_s","isLiked","setIsLiked","isLoading","setIsLoading","checkLikeStatus","id","console","log","response","fetch","credentials","headers","data","json","error","handleLike","e","preventDefault","method","body","JSON","stringify","recipeId","ok","text","children","className","src","image","alt","title","fileName","_jsxFileName","lineNumber","columnNumber","calories","onClick","disabled","viewBox","cx","cy","r","stroke","strokeWidth","fill","d","_c","$RefreshReg$"],"sources":["/Users/MengHor/Documents/Recipe/frontend/my-app/src/components/Card.js"],"sourcesContent":["import React, {useEffect, useState} from 'react'\nimport Image from './Image';\nimport Name from './Name';\nimport Calorie from './Calorie';\n\nfunction Card(props) {\n    const [isLiked, setIsLiked] = useState(false);\n    const [isLoading, setIsLoading] = useState(false);\n\n    // Check initial like status\n    useEffect(() => {\n        const checkLikeStatus = async () => {\n            if (!props.id) {\n                return; // Ensure we have an ID before checking the like status\n            }\n\n            try {\n                console.log(`Checking like status for recipe ID: ${props.id}`);\n                const response = await fetch(`http://localhost:3001/api/likes/check/${props.id}`, {\n                    credentials: 'include',\n                    headers: {\n                        'Accept': 'application/json',\n                    },\n                });\n                const data = await response.json();\n                console.log('Initial like status:', data.isLiked); // Debug log\n                setIsLiked(data.isLiked); // Set the initial like status\n            } catch (error) {\n                console.error('Error checking like status:', error);\n            }\n        };\n\n        checkLikeStatus(); // Check the like status on component mount\n    }, [props.id]); // Only run this effect when props.id changes\n\n    const handleLike = async (e) => {\n        e.preventDefault();\n        setIsLoading(true);\n\n        try {\n            const response = await fetch('http://localhost:3001/api/likes', {\n                method: 'POST',\n                headers: {\n                    'Content-Type': 'application/json',\n                    'Accept': 'application/json',\n                },\n                body: JSON.stringify({ recipeId: props.id }),\n                credentials: 'include',\n            });\n\n            if (response.ok) {\n                const data = await response.json();\n                setIsLiked(data.isLiked); // Update like status based on server response\n                console.log('Like status updated:', data.isLiked); // Debug log\n            } else {\n                console.error('Server returned error:', await response.text());\n            }\n        } catch (error) {\n            console.error('Error toggling like:', error);\n        } finally {\n            setIsLoading(false);\n        }\n    };\n\n    return (\n        <div>\n            <div className=\"card flex items-stretch\">\n                <div className=\"max-w-sm h-full bg border-gray-200 rounded-lg shadow dark:bg-gray-800 dark:border-gray-700\">\n                    <img src={props.image} alt={props.title} />\n                    <div className=\"p-5\">\n                        <h2>{props.title}</h2>\n                        <p>{props.calories} calories</p>\n                        <button\n                            onClick={handleLike}\n                            disabled={isLoading}\n                            className={`p-2 transition-colors duration-200 rounded-full ${isLoading ? 'cursor-wait opacity-50' : ''}`}\n                            aria-label={isLiked ? 'Unlike recipe' : 'Like recipe'}\n                        >\n                            {isLoading ? (\n                                <div className=\"animate-spin h-5 w-5\">\n                                    <svg className=\"h-full w-full text-gray-400\" viewBox=\"0 0 24 24\">\n                                        <circle\n                                            className=\"opacity-25\"\n                                            cx=\"12\"\n                                            cy=\"12\"\n                                            r=\"10\"\n                                            stroke=\"currentColor\"\n                                            strokeWidth=\"4\"\n                                            fill=\"none\"\n                                        />\n                                        <path\n                                            className=\"opacity-75\"\n                                            fill=\"currentColor\"\n                                            d=\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"\n                                        />\n                                    </svg>\n                                </div>\n                            ) : (\n                                <i className={`fa fa-heart text-xl ${isLiked ? 'text-red-500' : 'text-gray-600 dark:text-gray-400 hover:text-red-500'}`} />\n                            )}\n                        </button>\n                    </div>\n                </div>\n            </div>\n        </div>\n    );\n}\n\nexport default Card;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}